<app-header [page] = "'graph'"></app-header>
 <div class = "chartOpt">
    <div class = "pieChart">
        <ngx-charts-pie-chart 
        [results]="todoData"
        [legend]="true"
        [legendTitle]="'Todo Progress'" 
        [view]="[1000,500]"
        [labels]="true">
        </ngx-charts-pie-chart>
   
          <!-- <form *ngIf="admin === 'true'">
            <mat-form-field class="example-full-width">
              <mat-label>Nickname</mat-label>
              <input type="text" matInput [formControl]="searchControl" [(ngModel)]="user" #input [matAutocomplete]="auto" (keyup.enter)="onEnter()">
              <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn" >
                <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                  {{option.nickname}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </form> -->

    </div>
    <ng-select [multiple]="true" [formControl]="optionsControl" (change)="onSelect($event)" *ngIf = "admin === 'true'">
      <ng-option *ngFor="let option of options" [value]="option.id  ">{{option.nickname}}</ng-option>
     </ng-select>  
     <div>
    <div class = "lineChart">
      <ngx-charts-line-chart [view]="[1500, 300]" 
      [xAxis]="xAxis" [yAxis]="yAxis" [xAxisLabel]="xAxisLabel" [yAxisLabel]="yAxisLabel"
      [results]="[todosGuide]">
      </ngx-charts-line-chart>
      <!-- <form *ngIf="admin === 'true'"> 
        <ng-select [multiple]="true" [formControl]="optionsControl" (change)="onSelect($event)">
         <ng-option *ngFor="let option of options" [value]="option.nickname  ">{{option.nickname}}</ng-option>
        </ng-select>  
      </form> -->

    </div>  
</div>
</div>
<div class = "todoTable"> 
  <h1>Latest Tasks Complete</h1>
  <table #todoTable mat-table [dataSource]="todos" class=table>
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>
          Id
        </th>
        <td mat-cell *matCellDef="let todo"> {{todo.id}} </td>
      </ng-container>
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>
          <div>
            <span>
              Title
            </span>
          </div>
        </th>
        <td mat-cell *matCellDef="let todo"> {{todo.title}} </td>
      </ng-container>
      <ng-container matColumnDef="completed">
        <th mat-header-cell *matHeaderCellDef>
          <div>
            <span>
              Completed On
            </span>
          </div>
        </th>
        <td mat-cell *matCellDef="let todo"> {{todo.updatedAt | date:'medium'}} </td>
      </ng-container>
      <div>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </div>
  </table>
</div> 
